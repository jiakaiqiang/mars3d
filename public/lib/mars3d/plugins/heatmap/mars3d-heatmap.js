/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.5.15
 * 编译日期：2023-07-11 17:33:29
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';const _0x1757d1=_0x493b;(function(_0x39737a,_0x13ee85){const _0x4acbb6={_0xd51819:0xd9,_0x1276c5:0x9c,_0x4afd57:0xb3},_0x5849ee=_0x493b,_0x1fdd74=_0x39737a();while(!![]){try{const _0x20be7b=-parseInt(_0x5849ee(0x94))/0x1*(-parseInt(_0x5849ee(_0x4acbb6._0xd51819))/0x2)+-parseInt(_0x5849ee(_0x4acbb6._0x1276c5))/0x3+parseInt(_0x5849ee(0xe4))/0x4+-parseInt(_0x5849ee(0xaa))/0x5+-parseInt(_0x5849ee(0xb8))/0x6+-parseInt(_0x5849ee(0x9b))/0x7*(-parseInt(_0x5849ee(0xb4))/0x8)+parseInt(_0x5849ee(_0x4acbb6._0x4afd57))/0x9*(parseInt(_0x5849ee(0x95))/0xa);if(_0x20be7b===_0x13ee85)break;else _0x1fdd74['push'](_0x1fdd74['shift']());}catch(_0x55da39){_0x1fdd74['push'](_0x1fdd74['shift']());}}}(_0x110c,0x63eae));function _interopNamespace(_0x38287d){const _0x564ea9={_0x1277d8:0xe6,_0x221960:0xa1},_0x333530=_0x493b;if(_0x38287d&&_0x38287d[_0x333530(0xa7)])return _0x38287d;var _0x591206=Object[_0x333530(_0x564ea9._0x1277d8)](null);return _0x38287d&&Object[_0x333530(0xda)](_0x38287d)[_0x333530(_0x564ea9._0x221960)](function(_0x3570e7){if(_0x3570e7!=='default'){var _0x32d8e7=Object['getOwnPropertyDescriptor'](_0x38287d,_0x3570e7);Object['defineProperty'](_0x591206,_0x3570e7,_0x32d8e7['get']?_0x32d8e7:{'enumerable':!![],'get':function(){return _0x38287d[_0x3570e7];}});}}),_0x591206['default']=_0x38287d,_0x591206;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337),HeatMaterial='uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!h337__namespace['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');function _0x493b(_0x2fb412,_0x4db8f8){const _0x110cb9=_0x110c();return _0x493b=function(_0x493b80,_0x312d90){_0x493b80=_0x493b80-0x8e;let _0x5269b7=_0x110cb9[_0x493b80];return _0x5269b7;},_0x493b(_0x2fb412,_0x4db8f8);}const Cesium=mars3d__namespace[_0x1757d1(0xa9)],BaseLayer=mars3d__namespace[_0x1757d1(0x92)]['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:_0x1757d1(0xdc),0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x2f58ac={}){const _0x31d1af={_0x3464c2:0xc8,_0x4f0029:0xcf,_0x598169:0x8e,_0x75e9ca:0xae},_0x226fe6=_0x1757d1;super(_0x2f58ac),this['options'][_0x226fe6(0xcf)]=this['options']['maxCanvasSize']??document[_0x226fe6(_0x31d1af._0x3464c2)]['clientWidth'],this[_0x226fe6(0xae)][_0x226fe6(_0x31d1af._0x4f0029)]=Math['min'](this['options']['maxCanvasSize'],0x1388),this['options']['minCanvasSize']=this['options'][_0x226fe6(0xd2)]??document[_0x226fe6(_0x31d1af._0x3464c2)]['clientHeight'],this['options']['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this['options'][_0x226fe6(_0x31d1af._0x598169)]={...DEF_HEATSTYLE,...this['options']['heatStyle']},this['options']['style']={...DEF_STYLE,...this[_0x226fe6(_0x31d1af._0x75e9ca)]['style']};}get['layer'](){return this['_layer'];}get[_0x1757d1(0x8e)](){const _0x213969=_0x1757d1;return this[_0x213969(0xae)]['heatStyle'];}set['heatStyle'](_0x121d64){const _0x157a89={_0x26db2d:0x8e},_0x5aec31=_0x1757d1;this['options']['heatStyle']=mars3d__namespace[_0x5aec31(0xc0)][_0x5aec31(0xa6)](this['options']['heatStyle'],_0x121d64),this['_heat']&&(this['_heat'][_0x5aec31(0xb9)](this['options'][_0x5aec31(_0x157a89._0x26db2d)]),this[_0x5aec31(0x98)](!![]));}get[_0x1757d1(0xdd)](){return this['options']['style'];}set['style'](_0x21592d){const _0x1bf3d={_0x43d684:0xdd},_0x379566=_0x1757d1;this['options']['style']=mars3d__namespace['Util']['merge'](this['options'][_0x379566(_0x1bf3d._0x43d684)],_0x21592d);}get[_0x1757d1(0xaf)](){return this['_positions'];}set['positions'](_0x1a4cd6){const _0x473a28=_0x1757d1;this[_0x473a28(0x8f)](_0x1a4cd6);}get['coordinates'](){const _0x161b0b={_0x3c65de:0x9d},_0x572740=[];return this['points']['forEach'](_0x50afac=>{const _0xea5951=_0x493b;_0x572740[_0xea5951(0xb1)](_0x50afac[_0xea5951(_0x161b0b._0x3c65de)]());}),_0x572740;}get[_0x1757d1(0x9e)](){return this['_rectangle'];}['_setOptionsHook'](_0x2ab475,_0xa703d8){const _0x3f8ca6=_0x1757d1;_0x2ab475['positions']&&(this['positions']=_0x2ab475[_0x3f8ca6(0xaf)]);}['_mountedHook'](){const _0x4bfb15={_0x44dd9f:0xdd,_0x1bea78:0xce,_0x34e080:0x92},_0x4abe3d=_0x1757d1;this[_0x4abe3d(_0x4bfb15._0x44dd9f)]['type']===_0x4abe3d(_0x4bfb15._0x1bea78)?this['_layer']=new mars3d__namespace[(_0x4abe3d(_0x4bfb15._0x34e080))]['ImageLayer']({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace['layer']['GraphicLayer']({'private':!![]});}['_addedHook'](){const _0x4cc300={_0x516322:0xbc,_0x332773:0xe5,_0x20697a:0xaf},_0x61ce3f=_0x1757d1;this[_0x61ce3f(0xd1)][_0x61ce3f(0xbf)](this[_0x61ce3f(0xde)]),this['_container']=mars3d__namespace['DomUtil'][_0x61ce3f(0xe6)]('div',_0x61ce3f(_0x4cc300._0x516322),this['_map'][_0x61ce3f(_0x4cc300._0x332773)]),this['options']['positions']&&(this[_0x61ce3f(_0x4cc300._0x20697a)]=this['options']['positions']),this['options'][_0x61ce3f(0xa8)]&&this['flyToByAnimationEnd']();}['_removedHook'](){const _0x53bbd7=_0x1757d1;this[_0x53bbd7(0xa3)]&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this['_container']),this['clear'](),this['_map']['removeLayer'](this['_layer']);}[_0x1757d1(0xb5)](_0x26f99c,_0x511cc7){const _0xadc121={_0x32cbd5:0x90},_0x1d0fbf=_0x1757d1;this['_positions']=this['_positions']||[],this[_0x1d0fbf(_0xadc121._0x32cbd5)]['push'](_0x26f99c),this['_updatePositionsHook'](_0x511cc7);}['setPositions'](_0x4f18ed,_0x5ca4c4){const _0x1c66c1={_0x47b3f7:0x98},_0x3e5346=_0x1757d1;this['_positions']=_0x4f18ed,this[_0x3e5346(_0x1c66c1._0x47b3f7)](_0x5ca4c4);}['clear'](){const _0x91a088={_0x2843f7:0xdf,_0x406787:0xcd},_0xa290d9=_0x1757d1;this[_0xa290d9(_0x91a088._0x2843f7)]&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer']['removeGraphic'](this[_0xa290d9(_0x91a088._0x406787)],!![]),delete this['_graphic2']);}['_updatePositionsHook'](_0x5bd02a){const _0x345400={_0x153551:0xb7,_0x4c24d3:0xdf,_0x5761f8:0xdf,_0x481470:0xe0,_0x54000f:0xcd},_0x164f7c=_0x1757d1;if(!this['show']||!this['_map']||!this['positions']||this['positions']['length']===0x0)return this;const _0x220659=this['_getHeatCanvas']();if(this[_0x164f7c(0xdd)][_0x164f7c(0xb6)]==='image')this['_layer']['setOptions']({'url':_0x220659['toDataURL']('image/png'),'rectangle':this['_rectangle'],'opacity':this['style'][_0x164f7c(_0x345400._0x153551)]});else this['style']['arc']?this[_0x164f7c(_0x345400._0x4c24d3)]&&_0x5bd02a?(this[_0x164f7c(_0x345400._0x5761f8)]['uniforms']['image']=_0x220659,this[_0x164f7c(0xdf)][_0x164f7c(_0x345400._0x481470)]['bumpMap']=this['_getArcHeatCanvas'](),this[_0x164f7c(_0x345400._0x54000f)]&&(this['_graphic2']['uniforms'][_0x164f7c(0xce)]=_0x220659,this['_graphic2']['uniforms']['bumpMap']=this['_graphic']['uniforms'][_0x164f7c(0xc5)])):this[_0x164f7c(0xb0)](_0x220659):this['_graphic']&&_0x5bd02a?this['_graphic']['uniforms']['image']=_0x220659:this['_createGraphic'](_0x220659);return this;}[_0x1757d1(0x91)](_0x2cd008){const _0x3e0a20={_0x17ab56:0xba,_0x16eed4:0xe7,_0x143e84:0xbe,_0x35fd5a:0xdf},_0x195548=_0x1757d1;this['clear'](),this[_0x195548(0xdf)]=new mars3d__namespace['graphic'][(_0x195548(_0x3e0a20._0x17ab56))]({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x195548(_0x3e0a20._0x16eed4))]({'material':new Cesium[(_0x195548(_0x3e0a20._0x143e84))]({'fabric':{'uniforms':{'image':_0x2cd008},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})}),this['_layer']['addGraphic'](this[_0x195548(_0x3e0a20._0x35fd5a)]);}['_createArcGraphic'](_0x45be1d){const _0x115882={_0x2396ea:0xc9,_0x2adb4a:0xc4,_0x59d2ab:0x9a,_0x57d461:0xdd,_0x284796:0x9f,_0x3cd3ed:0xe7,_0x429d0f:0xb2,_0x7372d4:0xde},_0x5d6eaa=_0x1757d1;this['clear']();const _0x78d526=Cesium[_0x5d6eaa(0xca)]['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x5d6eaa(_0x115882._0x2396ea)][_0x5d6eaa(_0x115882._0x2adb4a)],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0x5d6eaa(0xa5)]['KEEP'],'zPass':Cesium[_0x5d6eaa(0xa5)][_0x5d6eaa(_0x115882._0x59d2ab)]},'backFunction':Cesium['StencilFunction'][_0x5d6eaa(0xc4)],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation'][_0x5d6eaa(0x9a)]},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState']['ALPHA_BLEND']}),_0x45f7a7=Math['floor'](this[_0x5d6eaa(0xdd)]['diffHeight']??this['_mBoundsMax']*0.02)+0.1;this['style']['diffHeight']&&delete this[_0x5d6eaa(_0x115882._0x57d461)]['diffHeight'];const _0x4f84cb=(this['style'][_0x5d6eaa(0xc1)],0x64);let _0x291c3b=Math['max'](this[_0x5d6eaa(0xe3)]['height'],this[_0x5d6eaa(0xe3)][_0x5d6eaa(_0x115882._0x284796)]);this['style']['granularity']=_0x291c3b/=_0x4f84cb;const _0x45aa9c=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x45be1d,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x1911a1=this['style']['arcDirection']||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x5d6eaa(_0x115882._0x3cd3ed))]({'flat':!![],'aboveGround':!![],'renderState':_0x78d526,'material':_0x45aa9c,'vertexShaderSource':getVertexShaderSource(_0x45f7a7*_0x1911a1)})}),this[_0x5d6eaa(0xde)]['addGraphic'](this['_graphic']),this['style'][_0x5d6eaa(_0x115882._0x429d0f)]===0x0&&(this['_graphic2']=new mars3d__namespace['graphic'][(_0x5d6eaa(0xba))]({...this['options'],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x78d526,'material':_0x45aa9c,'vertexShaderSource':getVertexShaderSource(-_0x45f7a7)})}),this[_0x5d6eaa(_0x115882._0x7372d4)]['addGraphic'](this['_graphic2']));}['getRectangle'](_0x56a958){const _0x2e4a4d=_0x1757d1;return _0x56a958!==null&&_0x56a958!==void 0x0&&_0x56a958['isFormat']&&this[_0x2e4a4d(0xe3)]?mars3d__namespace['PolyUtil']['formatRectangle'](this['_rectangle']):this['_rectangle'];}['_getHeatCanvas'](){const _0x21bbb1={_0x32eb42:0x90,_0x28d406:0xad,_0x5e38a1:0xd2,_0x4328f5:0xd2,_0x133e9d:0x8e,_0xf07674:0xd5,_0x202a01:0xe8,_0x38318c:0x96,_0x531c65:0xd6,_0x1e8c62:0xa2},_0x3cdb4f={_0x8f4b91:0xd3,_0x34a7af:0xc7},_0x5512b8={_0x1befef:0xc3,_0x1d4a90:0xe2},_0x214e34=_0x1757d1,_0x282bcc=this[_0x214e34(_0x21bbb1._0x32eb42)],_0x655ad=[];let _0x79a070,_0x15f6d0,_0x2397c7,_0x195b3b;_0x282bcc['forEach'](_0x417484=>{const _0x286f72=_0x214e34,_0x4f2948=mars3d__namespace['LngLatPoint'][_0x286f72(0xe1)](_0x417484);if(!_0x4f2948)return;_0x4f2948[_0x286f72(_0x5512b8._0x1befef)]=_0x417484['value']||0x1,!this[_0x286f72(0xae)][_0x286f72(0x9e)]&&(_0x79a070===undefined?(_0x79a070=_0x4f2948['lng'],_0x15f6d0=_0x4f2948['lng'],_0x2397c7=_0x4f2948[_0x286f72(0xe2)],_0x195b3b=_0x4f2948['lat']):(_0x79a070=Math['min'](_0x79a070,_0x4f2948['lng']),_0x15f6d0=Math['max'](_0x15f6d0,_0x4f2948['lng']),_0x2397c7=Math['min'](_0x2397c7,_0x4f2948[_0x286f72(0xe2)]),_0x195b3b=Math[_0x286f72(0xcb)](_0x195b3b,_0x4f2948[_0x286f72(_0x5512b8._0x1d4a90)]))),_0x655ad['push'](_0x4f2948);});_0x79a070===_0x15f6d0&&(_0x79a070-=0.000001,_0x15f6d0+=0.000001);_0x2397c7===_0x195b3b&&(_0x2397c7-=0.000001,_0x195b3b+=0.000001);let _0xf0df50=this['options']['rectangle']||{'xmin':_0x79a070,'xmax':_0x15f6d0,'ymin':_0x2397c7,'ymax':_0x195b3b};const _0x1f851d=getMercatorBounds(_0xf0df50),_0x45cfde=Math['abs'](_0x1f851d[_0x214e34(0xd7)]-_0x1f851d['xmin']),_0x42b186=Math[_0x214e34(0xcc)](_0x1f851d['ymax']-_0x1f851d[_0x214e34(_0x21bbb1._0x28d406)]),_0x1e4692=Math['max'](_0x45cfde,_0x42b186),_0x2c25d1=Math['min'](_0x45cfde,_0x42b186);this['_mBoundsMax']=_0x1e4692;let _0x299b06=0x1;if(_0x1e4692>this['options']['maxCanvasSize'])_0x299b06=_0x1e4692/this['options']['maxCanvasSize'],_0x2c25d1/_0x299b06<this[_0x214e34(0xae)]['minCanvasSize']&&(_0x299b06=_0x2c25d1/this['options'][_0x214e34(_0x21bbb1._0x5e38a1)]);else _0x2c25d1<this['options'][_0x214e34(_0x21bbb1._0x4328f5)]&&(_0x299b06=_0x2c25d1/this['options']['minCanvasSize'],_0x1e4692/_0x299b06>this[_0x214e34(0xae)]['maxCanvasSize']&&(_0x299b06=_0x1e4692/this['options']['maxCanvasSize']));const _0x4f9d17=this[_0x214e34(_0x21bbb1._0x133e9d)]['radius']*1.5,_0x15381d=_0x45cfde/_0x299b06+_0x4f9d17*0x2,_0x347774=_0x42b186/_0x299b06+_0x4f9d17*0x2,_0x51007e=_0x4f9d17*_0x299b06;_0x1f851d['xmin']-=_0x51007e,_0x1f851d['ymin']-=_0x51007e,_0x1f851d[_0x214e34(0xd7)]+=_0x51007e,_0x1f851d[_0x214e34(0xd4)]+=_0x51007e,this['_scale']=_0x299b06,_0xf0df50=geLatLngBounds(_0x1f851d),this['_rectangle']=Cesium[_0x214e34(_0x21bbb1._0xf07674)]['fromDegrees'](_0xf0df50['xmin'],_0xf0df50['ymin'],_0xf0df50['xmax'],_0xf0df50['ymax']);let _0x136ca7=_0x655ad[0x0]['value']??0x1,_0x225be3=_0x655ad[0x0]['value']??0x0;const _0x14e0d1=[];_0x655ad[_0x214e34(0xa1)](_0x459f31=>{const _0x4dba1b=_0x214e34,_0x3468a9=mars3d__namespace['PointTrans'][_0x4dba1b(_0x3cdb4f._0x8f4b91)]([_0x459f31['lng'],_0x459f31['lat']]),_0x53c281=_0x459f31['value']||0x1,_0x99e9f2=Math[_0x4dba1b(_0x3cdb4f._0x34a7af)]((_0x3468a9[0x0]-_0x1f851d['xmin'])/_0x299b06),_0x4d769a=Math[_0x4dba1b(0xc7)]((_0x1f851d[_0x4dba1b(0xd4)]-_0x3468a9[0x1])/_0x299b06);_0x136ca7=Math['max'](_0x136ca7,_0x53c281),_0x225be3=Math[_0x4dba1b(0xab)](_0x225be3,_0x53c281),_0x14e0d1[_0x4dba1b(0xb1)]({'x':_0x99e9f2,'y':_0x4d769a,'value':_0x53c281});});const _0x1f91b5={'min':this['options']['min']??_0x225be3,'max':this['options'][_0x214e34(0xcb)]??_0x136ca7,'data':_0x14e0d1};this['_last_heatData']=_0x1f91b5;if(!this[_0x214e34(_0x21bbb1._0x202a01)]||_0x1f851d['xmin']!==this[_0x214e34(0xe8)][_0x214e34(_0x21bbb1._0x38318c)]||_0x1f851d['ymin']!==this['_last_mBounds']['ymin']||_0x1f851d['xmax']!==this['_last_mBounds']['xmax']||_0x1f851d[_0x214e34(0xd4)]!==this['_last_mBounds']['ymax']){this['_last_mBounds']=_0x1f851d,this['_container']['style']['cssText']='width:'+_0x15381d+_0x214e34(0xbd)+_0x347774+'px;';const _0x151d7f={...this['heatStyle'],'container':this['_container']};!this['_heat']?this['_heat']=h337__namespace['create'](_0x151d7f):this['_heat']['configure'](_0x151d7f);}this['_heat'][_0x214e34(_0x21bbb1._0x531c65)](_0x1f91b5);const _0x337969=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat'][_0x214e34(_0x21bbb1._0x1e8c62)][_0x214e34(0x97)]);return _0x337969;}['_getArcHeatCanvas'](){const _0x2c00b9={_0x3fd4e5:0x93,_0x350b52:0xd8,_0x559603:0xd0,_0x65c421:0xa4,_0x2a3a7b:0xae},_0x164259=_0x1757d1;this['_heat']['configure']({'radius':this['heatStyle'][_0x164259(_0x2c00b9._0x3fd4e5)]*this[_0x164259(0xdd)][_0x164259(0xdb)],'blur':this['heatStyle'][_0x164259(_0x2c00b9._0x350b52)]*this['style']['arcBlurScale'],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:'rgb(216,216,216)',0x1:_0x164259(_0x2c00b9._0x559603)}});const _0x5e59d3=mars3d__namespace['DomUtil'][_0x164259(_0x2c00b9._0x65c421)](this['_heat']['_renderer']['canvas']);return this['_heat']['configure'](this[_0x164259(_0x2c00b9._0x2a3a7b)][_0x164259(0x8e)]),_0x5e59d3;}['getPointData'](_0x5b4f9a){const _0x495e7e={_0x7fe4d5:0xd3,_0x5088eb:0xc2,_0x109489:0xac},_0x2b8927=_0x1757d1,_0x18e36e=mars3d__namespace['LngLatPoint'][_0x2b8927(0xe1)](_0x5b4f9a);if(!_0x18e36e)return{};const _0x5e3249=mars3d__namespace[_0x2b8927(0xa0)][_0x2b8927(_0x495e7e._0x7fe4d5)]([_0x18e36e['lng'],_0x18e36e['lat']]),_0x94812d=this['_last_mBounds'],_0x3600eb=Math['round']((_0x5e3249[0x0]-_0x94812d['xmin'])/this['_scale']),_0x1d74ee=Math['round']((_0x94812d['ymax']-_0x5e3249[0x1])/this['_scale']),_0x511770=this[_0x2b8927(_0x495e7e._0x5088eb)]['getValueAt']({'x':_0x3600eb,'y':_0x1d74ee}),_0x5640a9=this[_0x2b8927(_0x495e7e._0x5088eb)]['_renderer']['ctx'][_0x2b8927(_0x495e7e._0x109489)](_0x3600eb-0x1,_0x1d74ee-0x1,0x1,0x1)['data'];return{'x':_0x3600eb,'y':_0x1d74ee,'value':_0x511770,'color':'rgba('+_0x5640a9[0x0]+','+_0x5640a9[0x1]+','+_0x5640a9[0x2]+','+_0x5640a9[0x3]+')'};}}mars3d__namespace['LayerUtil']['register'](_0x1757d1(0x99),HeatLayer),mars3d__namespace[_0x1757d1(0x92)]['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337__namespace;function getMercatorBounds(_0x5741fb){const _0x3065e1={_0xccb94:0xd7},_0x2fb35b=_0x1757d1,_0x2a2689=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x5741fb['xmin'],_0x5741fb['ymin']]),_0x5bea5e=mars3d__namespace['PointTrans'][_0x2fb35b(0xd3)]([_0x5741fb[_0x2fb35b(_0x3065e1._0xccb94)],_0x5741fb['ymax']]);return{'xmin':_0x2a2689[0x0],'ymin':_0x2a2689[0x1],'xmax':_0x5bea5e[0x0],'ymax':_0x5bea5e[0x1]};}function _0x110c(){const _0x1cbdd7=['image','maxCanvasSize','rgb(255,255,255)','_map','minCanvasSize','lonlat2mercator','ymax','Rectangle','setData','xmax','blur','2flbUfw','keys','arcRadiusScale','green','style','_layer','_graphic','uniforms','parse','lat','_rectangle','4040SYSMqJ','container','create','EllipsoidSurfaceAppearance','_last_mBounds','heatStyle','setPositions','_positions','_createGraphic','layer','radius','447575NZNEvb','10yNaVLy','xmin','canvas','_updatePositionsHook','heat','REPLACE','2546516scrbzx','1925496Islvpg','toArray','rectangle','width','PointTrans','forEach','_renderer','_container','copyCanvas','StencilOperation','merge','__esModule','flyTo','Cesium','2118125NkOuNa','min','getImageData','ymin','options','positions','_createArcGraphic','push','arcDirection','11875509kywNuj','8TCVZku','addPosition','type','opacity','3942930aaRLhL','configure','RectanglePrimitive','defineProperty','mars3d-heatmap\x20mars3d-hideDiv','px;height:','Material','addLayer','Util','splitNum','_heat','value','ALWAYS','bumpMap','mercator2lonlat','round','body','StencilFunction','RenderState','max','abs','_graphic2'];_0x110c=function(){return _0x1cbdd7;};return _0x110c();}function geLatLngBounds(_0x1888f4){const _0x1cf5f2={_0x1406ce:0x96,_0x281db5:0xa0},_0x58bf9a=_0x1757d1,_0x21f167=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x1888f4[_0x58bf9a(_0x1cf5f2._0x1406ce)],_0x1888f4[_0x58bf9a(0xad)]]),_0x16f0c9=mars3d__namespace[_0x58bf9a(_0x1cf5f2._0x281db5)][_0x58bf9a(0xc6)]([_0x1888f4['xmax'],_0x1888f4['ymax']]);return{'xmin':_0x21f167[0x0],'ymin':_0x21f167[0x1],'xmax':_0x16f0c9[0x0],'ymax':_0x16f0c9[0x1]};}function getVertexShaderSource(_0x190c68){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x190c68+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}exports['HeatLayer']=HeatLayer,Object[_0x1757d1(0xbb)](exports,_0x1757d1(0xa7),{'value':!![]});
}));
